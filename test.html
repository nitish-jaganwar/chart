<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>ðŸ“Š Project Gantt Chart</title>
    <script src="https://www.gstatic.com/charts/loader.js"></script>
    <style>
      body {
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        background: #f8fafc;
        margin: 20px;
      }
      h2 {
        text-align: center;
        color: #333;
      }
      #chart_div {
        width: 100%;
        height: 80vh;
        background: #fff;
        border-radius: 10px;
        box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        padding: 15px;
        overflow-x: auto;
      }
    </style>
   <!-- <script>
Â  Â  Â  google.charts.load('current', {'packages':['gantt']});
Â  Â  Â  google.charts.setOnLoadCallback(drawChart);

Â  Â  Â  async function drawChart() {
Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  const response = await fetch('output.json');
Â  Â  Â  Â  Â  let jsonData = await response.json();

Â  Â  Â  Â  Â  // âœ… handle single object or array
Â  Â  Â  Â  Â  if (!Array.isArray(jsonData)) {
Â  Â  Â  Â  Â  Â  jsonData = [jsonData];
Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  if (!jsonData || jsonData.length === 0) {
Â  Â  Â  Â  Â  Â  document.getElementById('chart_div').innerHTML = '<p>No data available.</p>';
Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  const data = new google.visualization.DataTable();
Â  Â  Â  Â  Â  data.addColumn('string', 'Task ID');
Â  Â  Â  Â  Â  data.addColumn('string', 'Task Name');
Â  Â  Â  Â  Â  // ðŸš¨ IMPORTANT: Add the 'Resource' column here
Â  Â  Â  Â  Â  data.addColumn('string', 'Resource'); 
Â  Â  Â  Â  Â  data.addColumn('date', 'Start Date');
Â  Â  Â  Â  Â  data.addColumn('date', 'End Date');
Â  Â  Â  Â  Â  data.addColumn('number', 'Duration');
Â  Â  Â  Â  Â  data.addColumn('number', 'Percent Complete');
Â  Â  Â  Â  Â  data.addColumn('string', 'Dependencies');

Â  Â  Â  Â  Â  jsonData.forEach(t => {
Â  Â  Â  Â  Â  Â  if (!t.start || !t.end) {
Â  Â  Â  Â  Â  Â  Â  console.warn("Skipping invalid task:", t);
Â  Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  let start = new Date(t.start);
Â  Â  Â  Â  Â  Â  let end = new Date(t.end);

Â  Â  Â  Â  Â  Â  // âœ… if start and end are same, make the task at least 1 hour long
Â  Â  Â  Â  Â  Â  if (start.getTime() === end.getTime()) {
Â  Â  Â  Â  Â  Â  Â  end = new Date(start.getTime() + 60 * 60 * 1000);
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â data.addRow([
Â  Â  Â  Â  Â  Â  Â  t.id?.toString() || '',
Â  Â  Â  Â  Â  Â  Â  t.name || '',
Â  Â  Â  Â  Â  Â  Â  t.resource || t.id?.toString() || '',
Â  Â  Â  Â  Â  Â  Â  start,
Â  Â  Â  Â  Â  Â  Â  end,
Â  Â  Â  Â  Â  Â  Â  null,
Â  Â  Â  Â  Â  Â  Â  Number(t.percent) || 0,
Â  Â  Â  Â  Â  Â  Â  // âœ… FIX 2: Use the dependencies field from your JSON
Â  Â  Â  Â  Â  Â  Â  t.dependencies || null 
Â  Â  Â  Â  Â  Â  ]);
Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  const options = {
Â  Â  Â  Â  Â  Â  height: jsonData.length * 50 + 100,
Â  Â  Â  Â  Â  Â  gantt: {
Â  Â  Â  Â  Â  Â  Â  // âœ… FIX 1: Set to TRUE to calculate and display the critical path
Â  Â  Â  Â  Â  Â  Â  criticalPathEnabled: true, 

Â  Â  Â  Â  Â  Â  Â  // ðŸ’¡ Optional: You can customize the look of the critical path here:
              criticalPathStyle: {
                 stroke: '#DB4437', // A strong red color
                 strokeWidth: 4 
              },

Â  Â  Â  Â  Â  Â  Â  arrow: {
Â  Â  Â  Â  Â  Â  Â  Â  angle: 100,
Â  Â  Â  Â  Â  Â  Â  Â  width: 5,
Â  Â  Â  Â  Â  Â  Â  Â  color: 'green',
Â  Â  Â  Â  Â  Â  Â  Â  radius: 0
Â  Â  Â  Â  Â  Â  Â  },
Â  Â  Â  Â  Â  Â  Â  trackHeight: 30,
Â  Â  Â  Â  Â  Â  Â  barCornerRadius: 5,
Â  Â  Â  Â  Â  Â  Â  labelMaxWidth: 600,
                 // ðŸš¨ IMPORTANT: Define your color palette here
                 palette: [
                    { 
                        "color": "#1E88E5",  // Blue (Label Text Color)
                        "dark": "#0D47A1",   // Dark Blue (Completed % Color)
                        "light": "#BBDEFB"   // Light Blue (Remaining Bar Color)
                    },
                    { 
                        "color": "#FFB300",  // Orange
                        "dark": "#E65100",   // Dark Orange
                        "light": "#FFE0B2"   // Light Orange
                    },
                    { 
                        "color": "#43A047",  // Green
                        "dark": "#1B5E20",   // Dark Green
                        "light": "#C8E6C9"   // Light Green
                    },
                    { 
                        "color": "#E53935",  // Red
                        "dark": "#B71C1C",   // Dark Red
                     "light": "#FFCDD2"   // Light Red
                    }
                 ]
Â  Â  Â  Â  Â  Â  },
Â  Â  Â  Â  Â  };

Â  Â  Â  Â  Â  const chart = new google.visualization.Gantt(document.getElementById('chart_div'));
Â  Â  Â  Â  Â  chart.draw(data, options);
Â  Â  Â  Â  } catch (err) {
Â  Â  Â  Â  Â  console.error(err);
Â  Â  Â  Â  Â  document.getElementById('chart_div').innerHTML = '<p>Error loading data.</p>';
Â  Â  Â  Â  }
Â  Â  Â  }
Â  Â  </script>-->
<script>
Â  Â  Â  google.charts.load('current', {'packages':['gantt']});
Â  Â  Â  google.charts.setOnLoadCallback(drawChart);

Â  Â  Â  async function drawChart() {
Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  const response = await fetch('sample.json');
Â  Â  Â  Â  Â  let jsonData = await response.json();

Â  Â  Â  Â  Â  // âœ… handle single object or array
Â  Â  Â  Â  Â  if (!Array.isArray(jsonData)) {
Â  Â  Â  Â  Â  Â  jsonData = [jsonData];
Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  if (!jsonData || jsonData.length === 0) {
Â  Â  Â  Â  Â  Â  document.getElementById('chart_div').innerHTML = '<p>No data available.</p>';
Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  const data = new google.visualization.DataTable();
Â  Â  Â  Â  Â  data.addColumn('string', 'Task ID');
Â  Â  Â  Â  Â  data.addColumn('string', 'Task Name');
Â  Â  Â  Â  Â  data.addColumn('string', 'Resource'); 
Â  Â  Â  Â  Â  data.addColumn('date', 'Start Date');
Â  Â  Â  Â  Â  data.addColumn('date', 'End Date');
Â  Â  Â  Â  Â  data.addColumn('number', 'Duration');
Â  Â  Â  Â  Â  data.addColumn('number', 'Percent Complete');
Â  Â  Â  Â  Â  data.addColumn('string', 'Dependencies');

Â  Â  Â  Â  Â  jsonData.forEach(t => {
Â  Â  Â  Â  Â  Â  if (!t.start || !t.end) {
Â  Â  Â  Â  Â  Â  Â  console.warn("Skipping invalid task:", t);
Â  Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  let start = new Date(t.start);
Â  Â  Â  Â  Â  Â  let end = new Date(t.end);

Â  Â  Â  Â  Â  Â  // âœ… if start and end are same, make the task at least 1 hour long
Â  Â  Â  Â  Â  Â  if (start.getTime() === end.getTime()) {
Â  Â  Â  Â  Â  Â  Â  end = new Date(start.getTime() + 60 * 60 * 1000);
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â data.addRow([
Â  Â  Â  Â  Â  Â  Â  t.id?.toString() || '',
Â  Â  Â  Â  Â  Â  Â  t.name || '',
Â  Â  Â  Â  Â  Â  Â  t.resource || t.id?.toString() || '',
Â  Â  Â  Â  Â  Â  Â  start,
Â  Â  Â  Â  Â  Â  Â  end,
Â  Â  Â  Â  Â  Â  Â  null,
Â  Â  Â  Â  Â  Â  Â  Number(t.percent) || 0,
Â  Â  Â  Â  Â  Â  Â  // Using t.dependencies to link tasks
Â  Â  Â  Â  Â  Â  Â  t.dependencies || null 
Â  Â  Â  Â  Â  Â  ]);
Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  const options = {
Â  Â  Â  Â  Â  Â  height: jsonData.length * 50 + 100,
Â  Â  Â  Â  Â  Â  gantt: {
Â  Â  Â  Â  Â  Â  Â  // FIX: Critical path is ENABLED
Â  Â  Â  Â  Â  Â  Â  criticalPathEnabled: true, 

Â  Â  Â  Â  Â  Â  Â  // NEW: Custom style for critical path bars (optional)
Â  Â  Â  Â  Â  Â  Â  criticalPathStyle: {
Â  Â  Â  Â  Â  Â  Â  Â  Â stroke: '#DB4437', // Red color for critical path
Â  Â  Â  Â  Â  Â  Â  Â  Â strokeWidth: 4 
Â  Â  Â  Â  Â  Â  Â  },
Â  Â  Â  Â  Â  Â  Â  trackHeight: 30,
Â  Â  Â  Â  Â  Â  Â  barCornerRadius: 5,
Â  Â  Â  Â  Â  Â  Â  // FIX: Increased width for full labels
Â  Â  Â  Â  Â  Â  Â  labelMaxWidth: 600,
Â  Â  Â  Â  Â  Â  Â  arrow: {
Â  Â  Â  Â  Â  Â  Â  Â  angle: 100,
Â  Â  Â  Â  Â  Â  Â  Â  width: 5,
Â  Â  Â  Â  Â  Â  Â  Â  color: 'green',
Â  Â  Â  Â  Â  Â  Â  Â  radius: 0
Â  Â  Â  Â  Â  Â  Â  },
Â  Â  Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  Â  Â  Â // Custom color palette
Â  Â  Â  Â  Â  Â  Â  Â  Â palette: [
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  { "color": "#1E88E5", "dark": "#0D47A1", "light": "#BBDEFB" },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  { "color": "#FFB300", "dark": "#E65100", "light": "#FFE0B2" },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  { "color": "#43A047", "dark": "#1B5E20", "light": "#C8E6C9" },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  { "color": "#E53935", "dark": "#B71C1C", "light": "#FFCDD2" }
Â  Â  Â  Â  Â  Â  Â  Â  Â ]
Â  Â  Â  Â  Â  Â  },
Â  Â  Â  Â  Â  };

Â  Â  Â  Â  Â  const chart = new google.visualization.Gantt(document.getElementById('chart_div'));
Â  Â  Â  Â  Â  chart.draw(data, options);
Â  Â  Â  Â  } catch (err) {
Â  Â  Â  Â  Â  console.error(err);
Â  Â  Â  Â  Â  document.getElementById('chart_div').innerHTML = '<p>Error loading data.</p>';
Â  Â  Â  Â  }
Â  Â  Â  }
Â  Â  </script>
  </head>
  <body>
    <h2>ðŸ“… Project Timeline</h2>
    <div id="chart_div"></div>
  </body>
</html>
